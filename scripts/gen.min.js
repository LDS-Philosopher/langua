function Subpatterns(){function s(){for(var s=[],e=1;e<=t.subNum;e++){var n=$('[data-sub="'+e+'"]').data("sel");s.push(n)}s.indexOf("-")>-1&&s.splice(s.indexOf("-"),1),s.sort(),t.used=s,console.log(t.used)}function e(){for(var s=t.options,e=0;e<t.used.length;e++){var n=s.indexOf(t.used[e]);n>-1&&s.splice(n,1)}s.sort(),t.remaining=s,console.log(t.remaining)}var t=this;this.data=$.getJSON("../data/gen.json"),console.log(this.data),this.options=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.used=[],this.remaining=this.options,this.subNum=0,this.addRow=function(){var s=++t.subNum<=4?' class="permanent"':"";$(".subpatterns").append("<select"+s+' data-sub="'+t.subNum+'" data-sel="-"></select>');var e=$('[data-sub="'+t.subNum+'"]');e.append('<option value="-" selected>-</option>');for(var n=0;n<t.remaining.length;n++){var a=t.remaining[n];e.append('<option value="'+a+'">'+a+"</option>")}},this.removeRow=function(s){$('[data-sub="'+s+'"]').remove()},this.selectSub=function(n,a){$('[data-sub="'+n+'"]').val(a).change(),s(),e(),t.cleanLists()},this.cleanLists=function(){for(var s=1;s<=t.subNum;s++)for(var e=$('[data-sub="'+s+'"]'),n=e.children(),a=0;a<n.length;a++)n[a].innerText!==e.data("sel")&&t.used.indexOf(n[a].innerText)>-1&&n[a].remove()}}var subPs=new Subpatterns;$(".gen").ready(function(){for(var s=1;s<=subPs.data.subpatterns.length+1;s++)subPs.addRow();subPs.selectSub(1,"V"),subPs.selectSub(2,"C"),subPs.selectSub(3,"N")});