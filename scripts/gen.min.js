function Subpatterns(){function e(){for(var e=[],s=1;s<=t.subNum;s++){var n=$('[data-sub="'+s+'"]').data("sel");e.push(n)}e.indexOf("-")>-1&&e.splice(e.indexOf("-"),1),e.sort(),t.used=e,console.log(t.used)}function s(){for(var e=t.options,s=0;s<t.used.length;s++){var n=e.indexOf(t.used[s]);n>-1&&e.splice(n,1)}e.sort(),t.remaining=e,console.log(t.remaining)}var t=this;this.options=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.used=[],this.remaining=this.options,this.subNum=0,this.addRow=function(){var e=++t.subNum<=4?' class="permanent"':"";$(".subpatterns").append("<select"+e+' data-sub="'+t.subNum+'" data-sel="-"></select>');var s=$('[data-sub="'+t.subNum+'"]');s.append('<option value="-" selected>-</option>');for(var n=0;n<t.remaining.length;n++){var a=t.remaining[n];s.append('<option value="'+a+'">'+a+"</option>")}},this.removeRow=function(e){$('[data-sub="'+e+'"]').remove()},this.selectSub=function(n,a){$('[data-sub="'+n+'"]').val(a).change(),e(),s(),t.cleanLists()},this.cleanLists=function(){for(var e=1;e<=t.subNum;e++)for(var s=$('[data-sub="'+e+'"]'),n=s.children(),a=0;a<n.length;a++)n[a].innerText!==s.data("sel")&&t.used.indexOf(n[a].innerText)>-1&&n[a].remove()}}var subpatterns=new Subpatterns;$(".gen").ready(function(){for(var e=1;e<=4;e++)subpatterns.addRow();subpatterns.selectSub(1,"V"),subpatterns.selectSub(2,"C"),subpatterns.selectSub(3,"N")});